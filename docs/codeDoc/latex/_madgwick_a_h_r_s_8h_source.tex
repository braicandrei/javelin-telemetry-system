\doxysection{Madgwick\+AHRS.\+h}
\hypertarget{_madgwick_a_h_r_s_8h_source}{}\label{_madgwick_a_h_r_s_8h_source}\index{C:/Users/Andrei/Documents/javelin-\/telemetry-\/system/software/embedded/javelin-\/embedded-\/system/lib/Madgwick/src/MadgwickAHRS.h@{C:/Users/Andrei/Documents/javelin-\/telemetry-\/system/software/embedded/javelin-\/embedded-\/system/lib/Madgwick/src/MadgwickAHRS.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//=============================================================================================}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ MadgwickAHRS.h}}
\DoxyCodeLine{00003\ \textcolor{comment}{//=============================================================================================}}
\DoxyCodeLine{00004\ \textcolor{comment}{//}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ Implementation\ of\ Madgwick's\ IMU\ and\ AHRS\ algorithms.}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ See:\ http://www.x-\/io.co.uk/open-\/source-\/imu-\/and-\/ahrs-\/algorithms/}}
\DoxyCodeLine{00007\ \textcolor{comment}{//}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ From\ the\ x-\/io\ website\ "{}Open-\/source\ resources\ available\ on\ this\ website\ are}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ provided\ under\ the\ GNU\ General\ Public\ Licence\ unless\ an\ alternative\ licence}}
\DoxyCodeLine{00010\ \textcolor{comment}{//\ is\ provided\ in\ source."{}}}
\DoxyCodeLine{00011\ \textcolor{comment}{//}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ Date\ \ \ \ \ \ \ \ \ Author\ \ \ \ \ \ \ \ \ \ Notes}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ 29/09/2011\ \ \ SOH\ Madgwick\ \ \ \ Initial\ release}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ 02/10/2011\ \ \ SOH\ Madgwick\ \ \ \ Optimised\ for\ reduced\ CPU\ load}}
\DoxyCodeLine{00015\ \textcolor{comment}{//}}
\DoxyCodeLine{00016\ \textcolor{comment}{//=============================================================================================}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#ifndef\ MadgwickAHRS\_h}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ MadgwickAHRS\_h}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <math.h>}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#define\ RAD2DEG\ 57.29577951308232f}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00024\ \textcolor{comment}{//\ Variable\ declaration}}
\DoxyCodeLine{00025\ \textcolor{keyword}{class\ }Madgwick\{}
\DoxyCodeLine{00026\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ invSqrt(\textcolor{keywordtype}{float}\ x);}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordtype}{float}\ beta;\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ algorithm\ gain}}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordtype}{float}\ q0;}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keywordtype}{float}\ q1;}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keywordtype}{float}\ q2;}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordtype}{float}\ q3;\ \ \ \textcolor{comment}{//\ quaternion\ of\ sensor\ frame\ relative\ to\ auxiliary\ frame}}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{float}\ invSampleFreq;}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{float}\ roll;}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{float}\ pitch;}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordtype}{float}\ yaw;}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordtype}{char}\ anglesComputed;}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordtype}{void}\ computeAngles();}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00041\ \textcolor{comment}{//\ Function\ declarations}}
\DoxyCodeLine{00042\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00043\ \ \ \ \ Madgwick(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{void}\ begin(\textcolor{keywordtype}{float}\ sampleFrequency)\ \{\ invSampleFreq\ =\ 1.0f\ /\ sampleFrequency;\ \}}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordtype}{void}\ update(\textcolor{keywordtype}{float}\ gx,\ \textcolor{keywordtype}{float}\ gy,\ \textcolor{keywordtype}{float}\ gz,\ \textcolor{keywordtype}{float}\ ax,\ \textcolor{keywordtype}{float}\ ay,\ \textcolor{keywordtype}{float}\ az,\ \textcolor{keywordtype}{float}\ mx,\ \textcolor{keywordtype}{float}\ my,\ \textcolor{keywordtype}{float}\ mz);}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordtype}{void}\ updateIMU(\textcolor{keywordtype}{float}\ gx,\ \textcolor{keywordtype}{float}\ gy,\ \textcolor{keywordtype}{float}\ gz,\ \textcolor{keywordtype}{float}\ ax,\ \textcolor{keywordtype}{float}\ ay,\ \textcolor{keywordtype}{float}\ az);}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{comment}{//float\ getPitch()\{return\ atan2f(2.0f\ *\ q2\ *\ q3\ -\/\ 2.0f\ *\ q0\ *\ q1,\ 2.0f\ *\ q0\ *\ q0\ +\ 2.0f\ *\ q3\ *\ q3\ -\/\ 1.0f);\};}}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{comment}{//float\ getRoll()\{return\ -\/1.0f\ *\ asinf(2.0f\ *\ q1\ *\ q3\ +\ 2.0f\ *\ q0\ *\ q2);\};}}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{comment}{//float\ getYaw()\{return\ atan2f(2.0f\ *\ q1\ *\ q2\ -\/\ 2.0f\ *\ q0\ *\ q3,\ 2.0f\ *\ q0\ *\ q0\ +\ 2.0f\ *\ q1\ *\ q1\ -\/\ 1.0f);\};}}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordtype}{float}\ getRoll()\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!anglesComputed)\ computeAngles();}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ roll\ *\ 57.29578f;}
\DoxyCodeLine{00053\ \ \ \ \ \}}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{float}\ getPitch()\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!anglesComputed)\ computeAngles();}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pitch\ *\ 57.29578f;}
\DoxyCodeLine{00057\ \ \ \ \ \}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{float}\ getYaw()\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!anglesComputed)\ computeAngles();}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ yaw\ *\ 57.29578f\ +\ 180.0f;}
\DoxyCodeLine{00061\ \ \ \ \ \}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{float}\ getRollRadians()\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!anglesComputed)\ computeAngles();}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ roll;}
\DoxyCodeLine{00065\ \ \ \ \ \}}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{float}\ getPitchRadians()\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!anglesComputed)\ computeAngles();}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pitch;}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordtype}{float}\ getYawRadians()\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!anglesComputed)\ computeAngles();}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ yaw;}
\DoxyCodeLine{00073\ \ \ \ \ \}}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{float}\ getInclination();}
\DoxyCodeLine{00075\ \};}
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00077\ }

\end{DoxyCode}
